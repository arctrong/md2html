<!DOCTYPE html>
<html>
<head><title>Plugins</title>
<meta charset="utf-8">
<link rel="shortcut icon" type="image/png" href="pict/favicon.png"/>
<link rel="stylesheet" type="text/css" href="styles.css"/>
<link rel="stylesheet" type="text/css" href="layout.css"/>

<style>
.headerNavArrows {position: relative; top: 3px;}
</style>
</head>
<body>

<div class="header"><b><span style="color:#ff7f2a;">M</span><sub style="color:dimgray;">2</sub><span style="color:#59f;margin-right:7px;">H</span></b><a 
class="header_item" href="../readme.html">Home</a><a 
class="header_item" href="installation.html">Installation</a><a 
class="header_item" href="usage.html">Usage</a><a 
class="header_item" href="index_page.html">Index</a><a 
class="header_item" href="https://github.com/arctrong/md2html">GitHub</a>

<a href="templates.html" title="Previous: Templates"><img class="headerNavArrows" src="pict/previous_page_h18px.png"/></a>

<a href="development.html" title="Next: Development"><img class="headerNavArrows" src="pict/next_page_h18px.png"/></a>


<span class="headerTitle">Plugins</span>
</div>

<div class="sidebar">
    <table class="sidebarAligner">
        <tr><td valign="top">
            <div class="sidebar_item "><a href="../readme.html">Home</a></div><div class="sidebar_item "><a href="installation.html">Installation</a></div><div class="sidebar_item "><a href="usage.html">Usage</a></div><div class="sidebar_item "><a href="page_content.html">Page content</a></div><div class="sidebar_item "><a href="templates.html">Templates</a></div><div class="sidebar_item selected"><a href="plugins.html">Plugins</a></div><div class="sidebar_item "><a href="development.html">Development</a></div>
            <h3>Useful links</h3>
            <div class="sidebar_item "><a href="https://daringfireball.net/projects/markdown/">Markdown</a></div><div class="sidebar_item "><a href="https://mustache.github.io/">Mustache</a></div><div class="sidebar_item "><a href="https://json.org/">JSON</a></div>
        </td></tr>
        <tr><td class="bottom" valign="bottom">
            Generated by md2html_py 1.0.0
            <br />2022-04-30 10:43:16
        </td></tr>
    </table>
</div>

<p style="font-size:44px;font-weight:bold;margin:0 0 30px 0;">Plugins</p>

<div class="toc">
<ul>
<li><a href="#about-plugins">About plugins</a></li>
<li><a href="#relative-paths-plugin">"relative-paths" plugin</a><ul>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#definition">Definition</a></li>
<li><a href="#usage">Usage</a></li>
</ul>
</li>
<li><a href="#page-flows-plugin">"page-flows" plugin</a><ul>
<li><a href="#motivation_1">Motivation</a></li>
<li><a href="#definition_1">Definition</a></li>
<li><a href="#usage_1">Usage</a></li>
</ul>
</li>
<li><a href="#page-variables-plugin">"page-variables" plugin</a><ul>
<li><a href="#motivation_2">Motivation</a></li>
<li><a href="#definition_2">Definition</a></li>
<li><a href="#usage_2">Usage</a></li>
<li><a href="#usage_3">Usage</a></li>
</ul>
</li>
</ul>
</div>
<hr />
<h1 id="about-plugins">About plugins</h1>
<p><a name="index_entry_1"></a>
Plugins automate and simplify typical tasks and make the documentation more structural and easy
to use.</p>
<p>The main approach used by this program is no interference in the Markdown syntax. So the
documentation content must be readable in plain text even without processing by this program.</p>
<p>Plugins provide extra possibilities for the templates processing and visualization.</p>
<p>See <a href="usage.html#using_argument_file">this section</a> for some plugins definition example.</p>
<hr />
<h1 id="relative-paths-plugin">"relative-paths" plugin</h1>
<h2 id="motivation">Motivation</h2>
<p>The program generates static HTML pages that reference other pages and resources like CSS and
pictures. The generated HTML pages may be located in different places of the project structure, 
so the same resources may be referenced differently from different pages.</p>
<p>In the following example:</p>
<pre class="highlight"><code class="language-shell">$ tree -L 2 --charset=ascii --dirsfirst
.
|-- doc
|   |-- about.html
|   `-- styles.css
`-- readme.html</code></pre>
<p>The reference to <code>styles.css</code> is <code>doc/styles.css</code> from the <code>readme.html</code> page, and <code>styles.css</code>
from the <code>about.html</code> page.</p>
<p>The plugin automatically recalculates relative paths for certain pages depending on their location
and avoids manual defining these paths for every page individually.</p>
<h2 id="definition">Definition</h2>
<p>Here's an example of the plugin definition:</p>
<pre class="highlight"><code>{
    "documents": [
        { "input": "readme.txt", "output": "readme.html", "title": "Home" },
        { "input": "doc_src/about.txt", "output": "doc/about.html", "title": "About" }
    ],
    "plugins": {
        "relative-paths": { "resource_path": "doc/" }
    }
}</code></pre>
<p>The plugin considers the <code>"resource_path"</code> and the current page location being relative to the
same location, that is the program invocation current directory in this case. When it
calculates the path then:</p>
<ul>
<li>for the page <code>readme.html</code> it'll return <code>doc/</code>;</li>
<li>for the page <code>doc/about.html</code> it'll return <code>""</code> (empty path, as they are located in the same
    directory).</li>
</ul>
<h2 id="usage">Usage</h2>
<p>Include the following <em>tag</em> to the template:</p>
<pre class="highlight"><code>&lt;link rel="stylesheet" type="text/css" href="{{resource_path}}styles.css"/&gt;</code></pre>
<p>That's it. When a document using this template is generated, this tag will be replaced with
the corresponding path.</p>
<hr />
<p><a name="index_entry_2"></a>    </p>
<h1 id="page-flows-plugin">"page-flows" plugin</h1>
<h2 id="motivation_1">Motivation</h2>
<p>Sidebar provides quick access to different project pages. It's often very helpful to put a
sequence of pages that are intended to be read in order. Doing it manually is pretty
cumbersome and error prone.</p>
<p>This plugin defines such pages sequences and and provides them for easy manipulation in templates.</p>
<h2 id="definition_1">Definition</h2>
<p>In the <code>"plugins"</code> sections:</p>
<pre class="highlight"><code>{
    "documents": [
        { "input": "page1.txt", "output": "page1.html", "title": "Page 1" },
        { "input": "page2.txt", "output": "doc/page2.html", "title": "Page 2" },
        { "input": "page3.txt", "output": "doc/page3.html", "title": "Page 3" }
    ],
    "plugins": {
        "page-flows": {
            "sidebar": [
                { "link": "page1.html", "title": "Page 1" },
                { "link": "doc/page2.html", "title": "Page 2" },
                { "link": "doc/page3.html", "title": "Page 3" },
                { "link": "www.google.com", "title": "Page 3", "external": true }
            ]
        }
    }
}</code></pre>
<p>In the above example the three pages are defined twice. To avoid such repetition the page flows 
may be defined directly in the <code>"documents"</code> section:</p>
<pre class="highlight"><code>{
    "documents": [
        { "input": "page1.txt", "output": "page1.html", "title": "Page 1", "page-flows": ["sidebar"] },
        { "input": "page2.txt", "output": "doc/page2.html", "title": "Page 2", "page-flows": ["sidebar"] },
        { "input": "page3.txt", "output": "doc/page3.html", "title": "Page 3", "page-flows": ["sidebar"] }
    ],
    "plugins": {
        "page-flows": {}
    }
}</code></pre>
<p>But the plugin itself must be activated to make it work. So even if all page flows are defined
in the <code>"documents"</code> section the plugin empty definition must be added to the <code>"plugins"</code>
section.</p>
<p>The <code>"page-flows"</code> document definition may be carried out to the <code>"default"</code> section (not
demonstrated here). Several page flows may be defined and a single page may be a part of several
page flows.</p>
<h2 id="usage_1">Usage</h2>
<p>In a template each page flow is accessible by its name (<code>sidebar</code> in the above example) and
provides the following structured data:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{{_name_}}</code></td>
<td>Iterable, returns <a href="#page_flow_page_structure">pages</a></td>
</tr>
<tr>
<td><code>{{_name_.previous}}</code></td>
<td>Previous <a href="#page_flow_page_structure">page</a> if exists</td>
</tr>
<tr>
<td><code>{{_name_.current}}</code></td>
<td>Current <a href="#page_flow_page_structure">page</a> if exists</td>
</tr>
<tr>
<td><code>{{_name_.next}}</code></td>
<td>Next <a href="#page_flow_page_structure">page</a> if exists</td>
</tr>
<tr>
<td><code>{{_name_.has_navigation}}</code></td>
<td>Boolean, <code>true</code> if ether previous or next page exist</td>
</tr>
<tr>
<td><code>{{_name_.not_empty}}</code></td>
<td>Boolean, <code>true</code> if contains at least one page</td>
</tr>
</tbody>
</table>
<p><a name="page_flow_page_structure"></a>
The page has the following structure:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{{link}}</code></td>
<td>The link that references the page. Recalculated for the current page</td>
</tr>
<tr>
<td><code>{{title}}</code></td>
<td>The title of the page</td>
</tr>
<tr>
<td><code>{{external}}</code></td>
<td>Boolean, external pages can never be current</td>
</tr>
<tr>
<td><code>{{first}}</code></td>
<td>Boolean, <code>true</code> if this is the first page in the sequence</td>
</tr>
<tr>
<td><code>{{last}}</code></td>
<td>Boolean, <code>true</code> if this is the last page in the sequence</td>
</tr>
</tbody>
</table>
<p>This data is calculated for every page that uses this template. So for the current page we can 
know the previous and the next pages and render the navigations. Here's a simple example:</p>
<pre class="highlight"><code>{{#sidebar.previous}}&lt;a href="{{link}}"&gt;[PREVIOUS]&lt;/a&gt;{{/sidebar.previous}}
{{#sidebar.next}}&lt;a href="{{link}}"&gt;[NEXT]&lt;/a&gt;{{/sidebar.next}}</code></pre>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code>{{#sidebar.previous}}...{{/sidebar.previous}}</code> means that if <code>sidebar.previous</code> value 
exists then the enclosed content is rendered. <code>sidebar.previous</code> value is a page and has
attribute <code>link</code> that is used in the rendered block.</p>
</div>
<p>Also for the current page we have the whole page sequence of the page flow and can render this
list in the sidebar. As we know which page or pages are current, we can highlight this links.
Here's a simplified example of how the sidebar items may be rendered:</p>
<pre class="highlight"><code>&lt;ul&gt;{{#sidebar}}
&lt;li&gt;&lt;a class="sidebarItem{{#current}} selected{{/current}}" href="{{link}}"&gt;{{title}}&lt;/a&gt;&lt;/li&gt;
{{/sidebar}}&lt;/ul&gt;</code></pre>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code>{{#sidebar}}...{{/sidebar}}</code> means that for each item in the <code>sidebar</code> value (that is 
iterable) render the enclosed content. The items are pages and their attributes <code>link</code>,
<code>title</code> and <code>current</code> are used in the rendered block.</p>
</div>
<p>This documentation demonstrates pretty typical usage of this plugin. Also see the template
<code>doc_src/templates/custom.html</code> and the <em>argument file</em> <code>md2html_args.json</code> for more
understanding of correspondence between the plugin's definition and usage.</p>
<hr />
<h1 id="page-variables-plugin">"page-variables" plugin</h1>
<h2 id="motivation_2">Motivation</h2>
<p>This plugin extracts variables from documents source text and provides these variables to be
used in the template.</p>
<h2 id="definition_2">Definition</h2>
<pre class="highlight"><code>    "plugins": {
        "page-variables": {"variables": {"only-at-page-start": true} }
    }</code></pre>
<p>This means that variables will be extracted from the <em>page metadata</em> blocks with marker
<code>variables</code> and only from those blocks that are the first non-blank text on the page.
This is the definition of the default marker so it may be simplified to <code>"page-variables": {}</code>,
and this is the recommended form.</p>
<h2 id="usage_2">Usage</h2>
<p>For the above plugin definition the metadata blocks may look like:</p>
<p><pre class="highlight"><code>&lt;!--variables {"title": "My page", "noPageTitle": true}--&gt;` must not be used inside the metadata
    section. Also consecutive hyphens `--` inside HTML comments may probably be a problem in some
    browsers. In JSON strings, Unicode entities may be used to resolve these issues, i.e. string
    `"&lt;!\u002D-text-\u002D&gt;"` will be interpreted as `"&lt;!--text--&gt;"`. Still, depending on the 
    page content and the context, opening and closing markers, even when escaped in JSON, may 
    cause unexpected result. Check it first if you really need to use these symbols.

----------------------------------------------------------------------------------------------------
# "variables" plugin

## Motivation

This plugin defines variables that are not bound to certain pages. Actually such values may be
included directly into the template with no need of using this plugin. But when the same template
is used by several projects it may be convenient to define some template variable parts that
different projects may substitute using their _argument files_.

## Definition
</code></pre>
"variables": {"logo": "<img src=\"logo.png\" />" }
````</p>
<h2 id="usage_3">Usage</h2>
<p>Tag (or tags) <code>{{{logo}}}</code> in the template will be substituted in the template. (Note that in
this case three pairs of curly braces are used to avoid HTML-escaping on substitution.)</p>
<p>&nbsp;</p>
<hr />

<p style="margin-top:0px;margin-bottom:0px;text-align:right;"><a href="templates.html" 
title="Previous: Templates"><img src="pict/previous_page.png"/></a>

<a href="development.html" title="Next: Development"><img 
src="pict/next_page.png"/></a>
</p>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

</body>
</html>
