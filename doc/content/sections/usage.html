<!DOCTYPE html>
<html lang="en">
<head><title>Usage</title>
<meta charset="utf-8">
<link rel="shortcut icon" type="image/png" href="../../favicon.png">
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="../../layout/content.css">
<link rel="stylesheet" type="text/css" href="../../themes/light/content_theme.css">
<link rel="stylesheet" type="text/css" href="../../layout/layout.css">
<link rel="stylesheet" type="text/css" href="../../themes/light/layout_theme.css">

<link rel="stylesheet" type="text/css" href="../../layout/flex.css">
<link rel="stylesheet" type="text/css" href="../../custom.css">
</head>
<body>

<div class="header">
<img id="burger" src="../..//layout/pict/burger.png" 
onclick="toggleSidebar();return false;" class="toggle_narrow_only_inline" alt="Sidebar">

<a 
class="header_item "
href="../../../readme.html"><img 
class="logo_image" src="../../favicon.png" alt="Logo"></a><a 
class="header_item toggle_wide_only_inline"
href="../../../readme.html"><span class="">Home</span></a><a 
class="header_item toggle_wide_only_inline"
href="installation.html"><span class="">Installation</span></a><a 
class="header_item selected toggle_wide_only_inline"
href="usage.html"><span class="">Usage</span></a><a 
class="header_item toggle_wide_only_inline"
href="../index_page.html"><span class="">Index</span></a><a 
class="header_item toggle_narrow_only_inline"
href="../index_page.html"><img 
class="header_image index_image" src="../../layout/pict/search.png" alt="Index"></a><a 
class="header_item toggle_wide_only_inline"
href="https://github.com/arctrong/md2html"><span class="">GitHub</span></a>
<a href="../../../doc_src/sections/usage.txt" class="source_file toggle_wide_only_inline" title="Source text">&lt;/&gt;</a>

<a href="installation.html" title="Previous: Installation"><img class="headerNavArrows"
src="../../layout/pict/previous_page_h21px.png" alt="Back"></a>

<a href="page_content.html" title="Next: Page content"><img class="headerNavArrows"
src="../../layout/pict/next_page_h21px.png" alt="Next"></a>


<span class="headerTitle">Usage</span>

</div>

<div class="sidebarWrapper">
<div class="sidebar">
    <table class="sidebarAligner">
        <tr><td class="valign_top">
            <div class="align_right toggle_narrow_only_block">
            <a class="sidebar_item_inline align_right" href="https://github.com/arctrong/md2html">GitHub</a>
            
            <a href="../../../doc_src/sections/usage.txt" class="sidebar_item_inline source_file align_right" 
                title="Source text">&lt;/&gt;</a>
            
            </div>
            
            <a class="sidebar_item " href="../../../readme.html">Home</a>
            <a class="sidebar_item " href="overview.html">Overview</a>
            <a class="sidebar_item " href="quick_start.html">Quick start</a>
            <a class="sidebar_item " href="installation.html">Installation</a>
            <a class="sidebar_item selected " href="usage.html">Usage</a>
            <a class="sidebar_item " href="page_content.html">Page content</a>
            <a class="sidebar_item " href="templates.html">Templates</a>
            <a class="sidebar_item " href="plugins.html">Plugins</a>
            <a class="sidebar_item " href="reference.html">Reference</a>
            <a class="sidebar_item " href="development.html">Development</a>
            <h3>Useful links</h3>
            <a class="sidebar_item " href="https://daringfireball.net/projects/markdown/">Markdown</a>
            <a class="sidebar_item " href="https://mustache.github.io/">Mustache</a>
            <a class="sidebar_item " href="https://json.org/">JSON</a>
            <a class="sidebar_item " href="https://en.wikipedia.org/wiki/Glob_(programming)">GLOB</a>
        </td></tr>
        <tr><td class="bottom valign_bottom"><span class="poweredBy">Powered by <a class="poweredByLink"
            href="https://github.com/arctrong/md2html">md2html_py</a> 1.0.6</span>
        </td></tr>
    </table>
</div>
</div>

<p style="font-size:44px;font-weight:bold;margin:0 0 30px 0;">Usage</p>

<div class="toc">
<ul>
<li><a href="#about-this-section">About this section</a></li>
<li><a href="#on-linux">On Linux</a></li>
<li><a href="#command-line-syntax">Command line syntax</a></li>
<li><a href="#using-command-line-arguments">Using command line arguments</a></li>
<li><a href="#using-argument-file">Using argument file</a></li>
<li><a href="#command-scripts">Command scripts</a></li>
<li><a href="#windows-explorer-context-menu-integration">Windows Explorer context menu integration</a></li>
<li><a href="#typical-project-structure">Typical project structure</a></li>
<li><a href="#previous-versions-compatibility">Previous versions compatibility</a><ul>
<li><a href="#legacy-projects-migration">Legacy projects migration</a></li>
<li><a href="#legacy-mode">Legacy mode</a></li>
</ul>
</li>
</ul>
</div>
<hr />
<h1 id="about-this-section">About this section</h1>
<p>This section describes the program running and documentation projects configuration. Documentation
content writing, formatting and structuring are described in the other sections.</p>
<hr />
<p><a name="index_entry_index_1"></a></p>
<h1 id="on-linux">On Linux</h1>
<p>The Java and the Python executables are platform-independent so they will theoretically work in
all environments where the corresponding <em>virtual machines</em> are installed. The tests were done only
on Windows and on Ubuntu Linux. The examples in this documentation are mostly given applied to 
Windows, but they may be easily adapted for Linux. Some Linux specific notes are given when 
required.</p>
<hr />
<h1 id="command-line-syntax">Command line syntax</h1>
<p>A simple usage example for the Python version is:</p>
<pre class="highlight"><code class="language-shell">&gt;python %MD2HTML_HOME%/python/md2html.py -i test.txt</code></pre>
<p>and for the Java version is:</p>
<pre class="highlight"><code class="language-shell">&gt;java -jar %MD2HTML_HOME%/java/target/md2html-bin.jar -i test.txt</code></pre>
<p>These both will convert file <code>test.txt</code> into file <code>test.html</code> using default parameters.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above commands very well explain the main idea of the program usage but 
there are more convenient ways described below in this section.</p>
</div>
<p>The program has much more command line options that are listed and described in the
<a href="reference.html#command_line_syntax">reference page</a>.</p>
<p>There are two ways of the program usage:</p>
<ul>
<li><a href="#using_command_line_arguments">With command line arguments</a></li>
<li><a href="#using_argument_file">With argument file</a></li>
</ul>
<hr />
<p><a name="using_command_line_arguments"></a></p>
<h1 id="using-command-line-arguments">Using command line arguments</h1>
<p>This mode accepts all required parameters in the command line and allows processing one document
per one run (unless <a href="reference.html#input_glob">GLOB</a> argument is used). It's selected 
if the <code>--argument-file</code> argument is not specified.</p>
<hr />
<p><a name="using_argument_file"></a><a name="index_entry_index_2"></a></p>
<h1 id="using-argument-file">Using argument file</h1>
<p>The <code>--argument-file</code> argument defines the <strong>argument file</strong> that will be used for
processing. This may be a single parameter of the call or other command line parameters may be
specified as well.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The command line and the <em>argument file</em> may specify different values for the parameters that
mean the same (sometimes they have different names). In this case the command line
arguments will <strong>override</strong> the corresponding parameters in the <em>argument file</em>.</p>
</div>
<p>The <em>argument file</em> allows to define:</p>
<ul>
<li>multiple files to be processed;</li>
<li>the same parameters that can be specified in the command line;</li>
<li>some additional parameters;</li>
<li>extended processing using <em>plugins</em>.</li>
</ul>
<p>Here is a simplest example of an <em>argument file</em>:</p>
<pre class="highlight"><code>{
    "documents": [
        { "input": "index.txt", "title": "Home" },
        { "input": "about.txt", "output": "about.html", "title": "Home" }
    ]
}</code></pre>
<p>It's similar to using command line arguments, except it defines several documents to process.</p>
<p>A more complex example and the <em>argument file</em> structure are described in the
<a href="reference.html#argument_file_structure">reference page</a>.</p>
<p>To execute an <em>argument file</em> <code>md2html_args.json</code> the following command may be used:</p>
<pre class="highlight"><code class="language-shell">&gt;python %MD2HTML_HOME%/python/md2html.py --argument-file md2html_args.json</code></pre>
<hr />
<p><a name="command_scripts"></a><a name="index_entry_index_3"></a></p>
<h1 id="command-scripts">Command scripts</h1>
<p>The following convenience command scripts are provided:</p>
<table>
<thead>
<tr>
<th>For Windows</th>
<th>For Linux</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>generate_doc_py.bat</code></td>
<td><code>generate_doc_py</code></td>
<td>Uses the Python version</td>
</tr>
<tr>
<td><code>generate_doc_java.bat</code></td>
<td><code>generate_doc_java</code></td>
<td>Uses the Java version</td>
</tr>
<tr>
<td><code>generate_doc.bat</code></td>
<td><code>generate_doc</code></td>
<td>Uses the executor selector</td>
</tr>
</tbody>
</table>
<p>The Windows versions may be run by double-click from the Windows file explorer. The Linux 
<em>Bash script</em> versions may need special environmental adjustments (depending on the Linux
distribution) to behave the same way. In Ubuntu these scripts were tested only in the command
line terminal.</p>
<p>These scripts execute the <em>argument file</em> <code>md2html_args.json</code> in the directory they are called
from. They will open a command window and close it just as they successfully complete.
If there are errors, the command window will stay open with the information and error messages
displayed.</p>
<p>These scripts are very small and intended to be copied to a project's directory where
they will process the project's <em>argument file</em> (see the 
<a href="#typical_project_structure">recommended project structure</a>).</p>
<p>The scripts <code>generate_doc.bat</code> and <code>generate_doc</code> use intermediate scripts with the <em>executor
selector</em>. These scripts accept their first argument <code>py</code>, or <code>java</code> and run the corresponding
version of the program. If nether of these arguments are specified the default executor will be
run (that is the Python version for now).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The documentation projects prepared for versions of this program prior to 1.0.0 will not work
with these scripts. See <a href="#legacy_compatibility">here</a> for possible workarounds.</p>
</div>
<hr />
<p><a name="index_entry_index_4"></a></p>
<h1 id="windows-explorer-context-menu-integration">Windows Explorer context menu integration</h1>
<p>The program may be integrated into Windows Explorer context menu:</p>
<p><img alt="WINDOWS_EXPOLORER_CONTEXT_MENU" src="../../pict/windows_context_menu.png" /></p>
<p>This may be a quick and convenient way to convert single documents.</p>
<p>The "no prompt" version generates HTML from the selected file with default options. It leaves
the command window open only in case of errors. The other version opens a command line window and
allows redefining some options. Just pressing <code>Enter</code> will fulfill generation with the default
options.</p>
<p>To add these context menu items, open the Windows Registry editor (press <code>Win</code>+<code>R</code>, type <code>regedit</code>
and press <code>Enter</code>) and add the following keys and values:</p>
<pre class="highlight"><code>[HKEY_CURRENT_USER\Software\Classes\*\shell\md2html]
@="Markdown to HTML..."
"icon"="\"X:\\path\\to\\md2html\\bin\\context_menu\\icon.ico"

[HKEY_CURRENT_USER\Software\Classes\*\shell\md2html\command]
@="\"\"X:\\path\\to\\md2html\\bin\\context_menu\\md2html_prompt.bat\" -i \"%1\""

[HKEY_CURRENT_USER\Software\Classes\*\shell\md2html_fast]
@="Markdown to HTML (no prompt)"
"icon"="\"X:\\path\\to\\md2html\\bin\\context_menu\\icon.ico"

[HKEY_CURRENT_USER\Software\Classes\*\shell\md2html_fast\command]
@="\"X:\\path\\to\\md2html\\bin\\context_menu\\md2html_prompt_fast.bat\" -i \"%1\""</code></pre>
<p>Here <code>@</code> stands for <code>(Default)</code> value name. <code>py</code> or <code>java</code> may be added before <code>-i</code> argument.
The quotes must be set like this:</p>
<p><img alt="" src="../../pict/reg_value.png" /></p>
<p>There is a Windows command line script that automates this operation. Open Windows console and
execute:</p>
<pre class="highlight"><code class="language-shell">&gt;%MD2HTML_HOME%\bin\context_menu\generate_reg_file.bat
The output file is: C:\Users\user1\md2html_context_menu_integration.reg</code></pre>
<p>Find the generated file in the user's profile directory, check and execute it (by double-click).
Read the popped up message and confirm the operation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There's no such integration for Linux. The interested Linux users may use the scripts 
<code>md2html_prompt.bat</code> and <code>md2html_prompt_fast.bat</code> in the directory <code>bin/context_menu/</code> as
the starting point for adaption.</p>
</div>
<hr />
<p><a name="typical_project_structure"></a></p>
<h1 id="typical-project-structure">Typical project structure</h1>
<p>The program doesn't set restrictions on the documentation project structure. The following 
structure is just a suggested approach that is used in this documentation.</p>
<p>Note that there's a quick start script described <a href="quick_start.html">here</a> that creates
a simple project with a structure like this. The following description may be used for manual
project setup.</p>
<pre class="highlight"><code class="language-shell">$ tree -L 2 --charset=ascii --dirsfirst
.
|-- doc
|   |-- content
|   |   |-- doc1.html
|   |   `-- doc2.html
|   |-- layout
|   |   |-- pict
|   |   |   |-- layout_image1.png
|   |   |   `-- layout_image2.png
|   |   |-- styles.css
|   |   `-- scripts.js
|   |-- pict
|   |   |-- image1.png
|   |   `-- image2.png
|   |-- themes
|   |   |-- light_default_content.css
|   |   `-- light_default_layout.css
|   |-- favicon.png
|   `-- custom.css
|-- doc_src
|   |-- templates
|   |   `-- multipage.html
|   |-- doc1.txt
|   `-- doc2.txt
|-- doc0.html
|-- doc0.txt
|-- generate_doc.bat
`-- md2html_args.json</code></pre>
<ul>
<li>
<p><code>doc0.txt</code> and <code>doc0.html</code> are the Markdown document and its corresponding generated HTML
    page that we want to have in the project's root.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>It may be convenient to have a documentation starting page in the project's root directory
but this page, on the other hand, requires special manipulation, so this decision is a kind
of a trade-off.</p>
</div>
</li>
<li>
<p>the <code>doc</code> directory along with the file <code>doc0.html</code> contain the whole project's HTML 
    documentation with all required resources like images and CSS files.
    This directory may be used and distributed autonomously (with additional file <code>doc0.html</code>
    if it's used).</p>
<p>Please note that as for now it's possible on the HTML pages to place links to their source
Markdown texts. In this case, if we want these links to work, we need to preserve the
source texts location.</p>
</li>
<li>
<p>the <code>doc/content</code> directory is intended to contain the <strong>generated artifacts only</strong>. I case of 
    problems with document generation, this directory may be safely deleted (or, maybe, better
    first renamed and then deleted). On the next project regeneration this directory and its 
    content will be recreated.</p>
</li>
<li>
<p>the <code>doc_src</code> directory contains all source files required for producing the project's
    documentation (except the file <code>doc0.txt</code> if we want to use it);</p>
</li>
<li>
<p><code>generate_doc.bat</code> &mdash; the double-click script for the whole HTML documentation regeneration;</p>
</li>
<li>
<p><code>md2html_args.json</code> &mdash; the project's <em>argument file</em>;</p>
</li>
<li>
<p><code>doc/layout</code> directory contains the resources that are used by the template itself. It's a 
    convenient way to separate those resources from the ones that are used by the documentation
    content. This directory may be copy-pasted to a new project and it will most likely work;</p>
</li>
<li>
<p><code>doc/themes</code> directory contains the <a href="templates.html#themes">color <em>themes</em></a> used by
    the documentation. More than one theme may be used at the same time.</p>
</li>
<li>
<p><code>favicon.png</code> file was placed here as it's treated as rather a project's artifact than an 
    artifact belonging to the template;</p>
</li>
<li>
<p><code>custom.css</code> is intended to contain the styles specific to the other project that is created
    by copy-pasting the current documentation structure and its artifacts.</p>
</li>
</ul>
<hr />
<p><a name="legacy_compatibility"></a><a name="index_entry_index_5"></a></p>
<h1 id="previous-versions-compatibility">Previous versions compatibility</h1>
<p>The version 1.0.0 of the program introduced the following significant changes: </p>
<ul>
<li>More convenient and about ten times more efficient documents bulk processing mechanism;</li>
<li>More versatile template engine.</li>
</ul>
<p>Those changes have made this program version incompatible with the documentation projects prepared
for the previous versions. The following subsections describe the possible solutions in such
situations.</p>
<p>The descriptions contain not yet introduced terminology. See the <a href="../index_page.html">Index</a> and
the further sections for clarification when required.</p>
<h2 id="legacy-projects-migration">Legacy projects migration</h2>
<p>This process consists of several steps.</p>
<ol>
<li>
<p>Migrate page generation templates. Replace placeholders <code>${content}</code> and <code>${styles}</code> with 
    <code>{{{content}}}</code> and <code>{{{styles}}}</code> (with <strong>three</strong> pairs of curly braces) respectively.
    Replace placeholders in format <code>${name}</code> with placeholders in format <code>{{name}}</code> (with
    <strong>two</strong> pairs of curly braces).</p>
</li>
<li>
<p>In the page metadata sections:</p>
<ul>
<li>replace markers <code>"METADATA"</code> (case insensitively) with marker <code>"VARIABLES"</code>;</li>
<li>in the <code>"placeholders"</code> sections move all variables to the same level as the 
    <code>"placeholders"</code> variable and delete the <code>"placeholders"</code> variable.</li>
</ul>
</li>
<li>
<p>Rewrite the <em>list file</em> <code>md2html_list.txt</code> to the <em>argument file</em> <code>md2html_args.json</code>. If 
    page metadata was used, add plugin <code>"page-variables": {}</code> to the <code>"plugins"</code> sections.</p>
</li>
<li>
<p>Replace the double-clock script <code>generate_html.bat</code> with the script <code>generate_doc.bat</code> or,
    by choice, the other script from the section <a href="#command_scripts">"Command scripts"</a>.</p>
</li>
</ol>
<p><a name="legacy_mode"></a><a name="index_entry_index_6"></a></p>
<h2 id="legacy-mode">Legacy mode</h2>
<p>The <code>--legacy-mode</code> command line argument or the <code>"legacy-mode: true</code> property in the
<em>argument file</em> <code>"options"</code> section may make this program process the legacy projects.</p>
<p>The command script <code>generate_html_legacy.bat</code> in the directory <code>legacy_scripts</code> is the version of
the former script <code>generate_html.bat</code> with the legacy mode activated. Put it to the documentation
project's directory and... hopefully... this must be enough.</p>
<p>In this mode the following processing changes will be done:</p>
<ul>
<li>Template placeholders in format <code>${name}</code> will be considered as <code>{{name}}</code> of <code>{{{name}}}</code>
    depending on the placeholder name.</li>
<li>Plugin <code>"page-variables": {"metadata": {}}</code> will be implicitly added and in the pages metadata
    sections, <code>"placeholders"</code> variable content will be moved one level up.</li>
</ul>
<p>These changes will not affect the project files and will be done virtually each time on
processing.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The former versions of this program used very slow (about ten times slower) documents bulk 
processing mechanism. So with large number of files it would be very helpful to at least replace
the outdated <em>list file</em> <code>md2html_list.txt</code> with an <em>argument file</em> <code>md2html_args.json</code>.
In this case use the <code>generate_doc.bat</code> script, and legacy mode may be activated
ether in that script or in the <em>argument file</em>.</p>
</div>
<p>&nbsp;</p>
<hr />

<p style="margin-top:0px;margin-bottom:0px;text-align:right;"><a href="installation.html" 
title="Previous: Installation"><img src="../../layout/pict/previous_page.png"
alt="Back"></a>
<a href="page_content.html" title="Next: Page content"><img 
src="../../layout/pict/next_page.png" alt="Next"></a>
</p>

<script>
function toggleSidebar() {
    let sidebar = document.getElementsByClassName("sidebarWrapper")[0]
    let display = sidebar.style.display
    if (!display || display == "none") {
        sidebar.style.display = "block"
    } else {
        sidebar.style.display = ""
    }
}
</script>

</body>
</html>
